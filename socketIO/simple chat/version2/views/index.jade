doctype html
html
  head
    script(src='/js/jquery.js')
    script(src='/js/socket.io.js')
    link(rel='stylesheet', type='text/css', href='/css/style.css')
    link(rel='stylesheet', type='text/css', href='/css/bootstrap.min.css')
    script.
      $(function() {
      // connect to server
      var socket = io.connect(window.location.href);
      // when a message is emitted from server, display in the chat window.
      socket.on('message:server', function(data) {
      $("#messages").append(
      '<li id="server_message">' +
      data.message+
      '</li><br>'
      );
      });
      // handle the form's "submit" event so as to not let it actually POST to server
      $("#message_form").on('submit', function(event) {
      // prevent POST
      event.preventDefault();
      // grab the "message" field from the form
      var $input = $('[name="message"]')
      var message = $input.val();
      // send message from client
      if (message) {
      socket.emit('message:client', {message: message});
      }
      // display message in UI
      $("#messages").append(
      '<li id="client_message">' +
      message+
      '</li><br>'
      );
      // clear form
      $input.val('');
      });
      // listen for errors
      socket.on('error', function() {
      console.error(arguments)
      });
      });
    title simple chat
  body
    .container-fluid
      .container
        .chat
          ul#messages
          form#message_form(method='post')
            input(name='message', placeholder='Message to send', type='text')
            button(type='submit') Send
